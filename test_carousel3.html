
<!doctype html>
<html lang="zh">
<head>
            <link rel="icon" type="image/vnd.microsoft.icon" href="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/favicon.ico"/>
    <link rel="manifest" href="https://w3.pinpinbox.com/manifest.json">
    <meta charset="utf-8">
        <meta name="viewport" content="width=device-width ,initial-scale=1.0">
    <meta name="keywords" content="pinpinbox">
    <meta name="description" content="pinpinbox是一個全新型態的社群平台，以類似於電子書的相本呈現方式，讓平時喜愛自拍攝影、文創設計、分享生活的你，能夠有個便利的工具編輯上傳你的相本。pinpinbox還結合電子商務，除了純分享創作至雲端空間，更有機會創業！">
    <meta name="msvalidate.01" content="851F62F6F1B71365ECE1EFE9C1D56C73"/>
    <meta name="apple-itunes-app" content="app-id=1057840696">
    <meta property="og:url" content="w3.pinpinbox.com/album/explore">
    <meta property="og:title" content="pinpinbox">
    <meta property="og:description" content="pinpinbox是一個全新型態的社群平台，以類似於電子書的相本呈現方式，讓平時喜愛自拍攝影、文創設計、分享生活的你，能夠有個便利的工具編輯上傳你的相本。pinpinbox還結合電子商務，除了純分享創作至雲端空間，更有機會創業！">
    <meta property="og:image" content="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/kanban.png">
    <script src="https://api.dmcdn.net/all.js"></script>
    <script src="https://f.vimeocdn.com/js/froogaloop2.min.js"></script>
    <title>pinpinbox</title>
    <link type="text/css" href="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/lightGallery-master/dist/css/lightgallery.min.css" rel="stylesheet" /><link type="text/css" href="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/lightGallery-master/dist/css/lightgallery-custom.min.css" rel="stylesheet" /><link type="text/css" href="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/owl.carousel/css/owl.carousel.css" rel="stylesheet" /><link type="text/css" href="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/owl.carousel/css/owl.theme.css" rel="stylesheet" /><link type="text/css" href="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/owl.carousel/css/owl.transitions.css" rel="stylesheet" /><link type="text/css" href="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/social-likes/css/social-likes_flat.css" rel="stylesheet" /><link type="text/css" href="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/jquery.magnific-popup/css/magnific-popup.css" rel="stylesheet" /><link type="text/css" href="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/jquery.bxslider/jquery.bxslider.css" rel="stylesheet" /><link type="text/css" href="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/css/bootstrap.min.css" rel="stylesheet" /><link type="text/css" href="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/css/fontello.css" rel="stylesheet" /><link type="text/css" href="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/css/font-awesome/css/font-awesome.css" rel="stylesheet" /><link type="text/css" href="https://w3.pinpinbox.com/js/jBox-0.4.8/jBox.css" rel="stylesheet" /><link type="text/css" href="https://w3.pinpinbox.com/js/jBox-0.4.8/plugins/Confirm/jBox.Confirm.css" rel="stylesheet" /><link type="text/css" href="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/css/style_v2.css" rel="stylesheet" />    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    </head>
<body>
<div id="fb-root"></div>
<script>(function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v2.10&appId=525308027624460";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>
<div id="alert_box_new">
    <div id="alert_bg_new"></div>
    <div id="alert_box_area">
        <div id="alert_top_new">
            <div id="alert_top_title">檢舉此作品</div>
            <div id="alert_close_btn"><i class="fa fa-times"></i></div>
        </div>
        <div id="alert_content_new">
            <div id="alert_items">
                <div id="alert_items01">
                            <div id="alert_radio_items01">
                                <input type="radio" value="1" id="input_01" name="report">
                                <label for="input_01">色情內容</label>
                            </div>
                            
                        </div><div id="alert_items02">
                            <div id="alert_radio_items02">
                                <input type="radio" value="2" id="input_02" name="report">
                                <label for="input_02">暴力或令人厭惡的內容</label>
                            </div>
                            
                        </div><div id="alert_items03">
                            <div id="alert_radio_items03">
                                <input type="radio" value="3" id="input_03" name="report">
                                <label for="input_03">仇恨或惡意內容</label>
                            </div>
                            
                        </div><div id="alert_items04">
                            <div id="alert_radio_items04">
                                <input type="radio" value="4" id="input_04" name="report">
                                <label for="input_04">有害的危險行為</label>
                            </div>
                            
                        </div><div id="alert_items05">
                            <div id="alert_radio_items05">
                                <input type="radio" value="5" id="input_05" name="report">
                                <label for="input_05">虐待兒童</label>
                            </div>
                            
                        </div><div id="alert_items06">
                            <div id="alert_radio_items06">
                                <input type="radio" value="6" id="input_06" name="report">
                                <label for="input_06">垃圾內容或內容與標題不符</label>
                            </div>
                            
                        </div><div id="alert_items07">
                            <div id="alert_radio_items07">
                                <input type="radio" value="7" id="input_07" name="report">
                                <label for="input_07">侵犯我的權利</label>
                            </div>
                            <div id="alert_desc_items07">
                                                <p>如果您確信有人在未獲授權的情況下，擅自在pinpinbox 上發佈您受版權保護的作品，這時可以提出侵犯版權通知。只有著作權人或其授權代理人可以提交這類要求。</p>
                                                <p>如要向 pinpinbox 通報涉嫌侵權的，最簡單快速的做法就是填寫網路表單。建議使用桌機和筆電填寫這份表單；在行動裝置及平板電腦上操作會較為繁複。</p>
                                                <p>如果您選擇提出侵權通知，要求我們移除相關內容，代表您採取了正式的法律程式。</p>
                                                <p class="red">請勿提出不實聲明，當送出此項檢舉即表示您已閱讀、瞭解並同意上述說明。濫用這項程式可能會導致您的帳戶遭到停權，您本人也可能因此需要承擔其他法律責任。</p>
                                              </div>
                        </div><div id="alert_items08">
                            <div id="alert_radio_items08">
                                <input type="radio" value="8" id="input_08" name="report">
                                <label for="input_08">文字相關檢舉</label>
                            </div>
                            
                        </div><div id="alert_items09">
                            <div id="alert_radio_items09">
                                <input type="radio" value="9" id="input_09" name="report">
                                <label for="input_09">詐騙訊息</label>
                            </div>
                            
                        </div>            </div>

            <div id="alert_desc_btn">
                <div class="btn_new btn_pink" id="alert_btn">送出</a></div>
            </div>
        </div><!-- #alert_content_new -->
    </div><!-- #alert_box_area -->
</div><!-- #alert_box_new -->
<div id="main"><!-- 表頭區塊開始 -->
<div id="header">
    <!-- 手機版搜尋區塊開始 -->
    <div id="mobile_search">
        <div class="header_search">
            <div class="header_search_box">
                <a href="javascript:void(0);" onclick="_search('mobile')"> <i class="fa fa-search"></i> </a>
                <input type="text" class="search_text" name="searchkey" id="mobile_searchkey" data-searchtype="user" data-device="mobile" autocomplete="off">

                <div class="search_btn">
                    <!-- 20190114 加入BOOTSTRAP DIV區塊, 將SPAN ID換成CLASS開始 -->
                    <div class="dropdown-sign dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                        <span class="search_type" data-searchtype="user">創作人</span> <i class="fa fa-caret-down"></i>
                    </div>
                    <!-- 20190114 加入BOOTSTRAP DIV區塊, 將SPAN ID換成CLASS結束 -->
                    <!-- 20190114 置換BOOTSTRAP CLASS開始 -->
                    <!--<div class="search_menu">-->
                    <div class="dropdown-menu dropdown_menu" role="menu">
                        <!-- 20190114 置換BOOTSTRAP CLASS結束 -->
                        <ul>
                            <!-- 20190114 在<a>加入class="searchtype", data-...與MARS v2同步開始 -->
                            <li><a href="javascript:void(0)" class="searchtype" data-searchtype="user" data-device="mobile">創作人</a></li>
                            <li><a href="javascript:void(0)" class="searchtype" data-searchtype="album" data-device="mobile">作品</a></li>
                            <!-- 20190114 在<a>加入class="searchtype"與MARS v2同步結束 -->
                        </ul>
                    </div>
                </div>

            </div>
        </div>
        <div class="header_search_close"><i class="fa fa-times"></i></div>
    </div>

    <!-- 電腦版搜尋區塊開始 -->
    <div id="header_top">
        <div class="header_logo"><a href="https://w3.pinpinbox.com/index/">pinpinbox釘釘吧</a></div>
        <div class="header_search">
            <div class="header_search_box">
                <a href="javascript:void(0);" onclick="_search('desktop')"> <i class="fa fa-search"></i> </a>
                <input type="text" class="search_text" name="searchkey" id="desktop_searchkey" data-searchtype="user" data-device="desktop" autocomplete="off">
                <div class="search_btn">
                    <!-- 20190114 加入BOOTSTRAP DIV區塊, 將SPAN ID換成CLASS開始 -->
                    <div class="dropdown-sign dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                        <span class="search_type" data-searchtype="user">創作人</span> <i class="fa fa-caret-down"></i>
                    </div>
                    <!-- 20190114 加入BOOTSTRAP DIV區塊, 將SPAN ID換成CLASS結束 -->
                    <!-- 20190114 置換BOOTSTRAP CLASS開始 -->
                    <!--<div class="search_menu">-->
                    <div class="dropdown-menu dropdown_menu" role="menu">
                        <!-- 20190114 置換BOOTSTRAP CLASS結束 -->
                        <ul>
                            <!-- 20190114 在<a>加入class="searchtype", data-...與MARS v2同步開始 -->
                            <li><a href="javascript:void(0)" class="searchtype" data-searchtype="user" data-device="desktop">創作人</a></li>
                            <li><a href="javascript:void(0)" class="searchtype" data-searchtype="album" data-device="desktop">作品</a></li>
                            <!-- 20190114 在<a>加入class="searchtype"與MARS v2同步結束 -->
                        </ul>
                    </div>
                </div>

            </div>
        </div>
        
        <!-- 電腦版選單開始 -->
        <div class="header_menu">
            <div class="create_album_area">
                <a href="javascript:void(0);" onclick="createAlbum();">建立作品</a>
            </div>
            <div class="notifier_menu_area">
                <a href="javascript:void(0);" id="notifier" class="dropdown-sign dropdown-toggle" data-toggle="dropdown" aria-expanded="false">通知</a>
                <div id="notifier_menu" class="notifier_menu dropdown-menu dropdown_menu" role="menu">
                    <ul class="noticeWarpper"></ul>
                    <a href="https://w3.pinpinbox.com/index/notifications/">
                        <div class="btn_new">通知中心</div>
                    </a>
                </div>
            </div>
            <div class="login_menu_area"><a href="https://w3.pinpinbox.com/index/user/login/">登入 | 註冊</a></div>        </div>

        <div class="pin_creator">
                    </div>

        <!-- 手機版選單開始 -->
        <div class="mobile_menu">
            <div class="mobile_img">
                <i id="search_m" class="fa fa-search"></i>
                <i id="notifier_m" class="fa fa-bell"></i>
                <a href="https://w3.pinpinbox.com/index/user/login/"><i id="login_m" class="fa fa-bars"></i></a>            </div>
        </div>
    </div>
</div>

<!-- 表頭區塊結束 -->

<script>
    //Mobile - notice
    function mobile_notice() {
        var myConfirm = new jBox('Modal', {
            cancelButton: '否',
            confirmButton: '是',
            confirm: function () {
                buyalbum();
            },
            onCloseComplete: function () {
                myConfirm.destroy();
            }
        }).setContent(
            '<div class="content">' +
            '<p class="keypoint"><img src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/info.png">&nbsp;Coming Soon!Only a PC device is supported at present.</p>' +
            //		 '<p><a data-uri="//" onclick="clickHandler(this.dataset.uri)" href="javascript:void(0)"><img class="app" src="//"></a>'+
            //		 '<a data-uri="//" onclick="clickHandler(this.dataset.uri)" href="javascript:void(0)"><img class="app" src="//"></a></p><br>' +
            '</div>'
        ).open();
    }

</script>
<script type="text/javascript" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/jquery-1.11.3.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/picturefill/2.3.1/picturefill.min.js"></script><script type="text/javascript" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/lightGallery-master/dist/js/lightgallery-all-modify.min.js"></script><script type="text/javascript" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/lightGallery-master/dist/js/lg-audio.min.js"></script><script type="text/javascript" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/lightGallery-master/dist/js/lg-subhtml.min.js"></script><script type="text/javascript" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/lightGallery-master/lib/jquery.mousewheel.min.js"></script><script type="text/javascript" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/owl.carousel/js/owl.carousel.min.js"></script><script type="text/javascript" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/social-likes/js/social-likes.js"></script><script type="text/javascript" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/jquery.magnific-popup/js/jquery.magnific-popup.js"></script><script type="text/javascript" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/browser-deeplink-master/browser-deeplink.min.js"></script><script type="text/javascript" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/jquery.bxslider/jquery.bxslider.min.js"></script><script type="text/javascript" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/jquery-timeago-master/js/jquery.timeago.js"></script><script type="text/javascript" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/jquery-timeago-master/js/jquery.timeago.zh-TW.js"></script><script type="text/javascript" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/bootstrap.min.js"></script><script type="text/javascript" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/Bootstrap-3-Typeahead-master/bootstrap3-typeahead-modify.min.js"></script><script type="text/javascript" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/jquery-cookie-master/src/jquery.cookie.js"></script><script type="text/javascript" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/jquery.nicescroll.min.js"></script><script type="text/javascript" src="https://w3.pinpinbox.com/js/jBox-0.4.8/jBox.min.js"></script><script type="text/javascript" src="https://w3.pinpinbox.com/js/jBox-0.4.8/plugins/Confirm/jBox.Confirm.min.js"></script><script type="text/javascript" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/js/pinpinbox/report.js"></script><!-- 主要內容區開始 -->
<div id="content">
    <!-- 分類標籤區塊開始 -->
    <div class="album_explore_content_header">
        <div id="album_explore_cat_area" class="album_explore_cat_area">
            <div class="album_explore_cat_area_wrap">
                <div class="album_explore_cat_tab ">
                            <a href="https://w3.pinpinbox.com/index/album/explore/?categoryarea_id=1">
                                <div class="btn_new"><img class="tab_img" src="https://ppb.sharemomo.com/upload/admin/categoryarea/20190528/5cecbe6e052a7.svg">
                                    旅人
                                </div>
                            </a>
                        </div><div class="album_explore_cat_tab active">
                            <a href="https://w3.pinpinbox.com/index/album/explore/?categoryarea_id=4">
                                <div class="btn_new"><img class="tab_img" src="https://ppb.sharemomo.com/upload/admin/categoryarea/20190528/5cecbedc2e133.svg">
                                    美食
                                </div>
                            </a>
                        </div><div class="album_explore_cat_tab ">
                            <a href="https://w3.pinpinbox.com/index/album/explore/?categoryarea_id=3">
                                <div class="btn_new"><img class="tab_img" src="https://ppb.sharemomo.com/upload/admin/categoryarea/20190528/5cecbea79c358.svg">
                                    藝文
                                </div>
                            </a>
                        </div><div class="album_explore_cat_tab ">
                            <a href="https://w3.pinpinbox.com/index/album/explore/?categoryarea_id=5">
                                <div class="btn_new"><img class="tab_img" src="https://ppb.sharemomo.com/upload/admin/categoryarea/20190528/5cecbeb2b903d.svg">
                                    知識
                                </div>
                            </a>
                        </div><div class="album_explore_cat_tab ">
                            <a href="https://w3.pinpinbox.com/index/album/explore/?categoryarea_id=13">
                                <div class="btn_new"><img class="tab_img" src="https://ppb.sharemomo.com/upload/admin/categoryarea/20190528/5cecbed18ad9c.svg">
                                    音樂
                                </div>
                            </a>
                        </div><div class="album_explore_cat_tab ">
                            <a href="https://w3.pinpinbox.com/index/album/explore/?categoryarea_id=7">
                                <div class="btn_new"><img class="tab_img" src="https://ppb.sharemomo.com/upload/admin/categoryarea/20190528/5cecbec4b847f.svg">
                                    時尚
                                </div>
                            </a>
                        </div><div class="album_explore_cat_tab ">
                            <a href="https://w3.pinpinbox.com/index/album/explore/?categoryarea_id=12">
                                <div class="btn_new"><img class="tab_img" src="https://ppb.sharemomo.com/upload/admin/categoryarea/20190528/5cecbefe94d2c.svg">
                                    公益
                                </div>
                            </a>
                        </div><div class="album_explore_cat_tab ">
                            <a href="https://w3.pinpinbox.com/index/album/explore/?categoryarea_id=11">
                                <div class="btn_new"><img class="tab_img" src="https://ppb.sharemomo.com/upload/admin/categoryarea/20190528/5cecbeeaeacab.svg">
                                    分享
                                </div>
                            </a>
                        </div>            </div>
        </div>
    </div>
    <!-- 分類標籤區塊結束 -->

    <!-- BANNER與精選創作人區塊開始 -->
    <div class="album_explore_banner">
        <div class="album_explore_banner_area">
            <div id="album_explore_banner_carousel" class="album_explore_banner_carousel  owl-carousel">
                
				<div class="page">
                  <div class="album_explore_banner_page_img">
                    <a href="https://w3.pinpinbox.com/index/album/content/?album_id=5750&autobuy=1" target="_blank">
                      <!-- 影片區塊開始 -->
                      <div class="album_explore_page_video_wrap" >
                        <iframe  class="album_explore_page_video" src="https://www.youtube.com/embed/aOhZVv0OaYw?rel=0&showinfo=0&autoplay=1&mute=1&loop=1" frameborder="0" allow="encrypted-media"  allowfullscreen></iframe>
                      </div>
                      <!-- 影片區塊結束 -->
                      <div class="album_explore_banner_page_img_area">
                        <img src="https://ppb.sharemomo.com/upload/admin/categoryarea_style/20180516/5afba7400a59e.jpg">
                      </div>
                    </a>
                  </div>
				  
				  </div>
				
				<div class="page">
                  <div class="album_explore_banner_page_img">
                    <a href="https://w3.pinpinbox.com/index/album/explore/?categoryarea_id=4" target="_blank">
                      <div class="album_explore_banner_page_img_area">
                        <img src="https://ppb.sharemomo.com/upload/admin/categoryarea_style/20190527/5cebada4a78bf.jpg">
                      </div>
                    </a>
                  </div>				  
				</div>            </div>

                  <div class="owl-buttons">
                    <div class="owl-prev"><i class="fa fa-chevron-left"></i></div>
                    <div class="owl-next"><i class="fa fa-chevron-right"></i></div>
                  </div>
				  
                </div>

        <div class="album_explore_creative_area">
            <div class="album_explore_creative_title">精選創作人</div>
            <div class="album_explore_creative_list">
                <a href="https://w3.pinpinbox.com/sung" target="_blank">
                            <div class="album_explore_creative_list_box">
                                <div class="profile_img_wrap">
                                    <img class="profile_img" src="https://ppb.sharemomo.com/storage/zh_TW/user/2/picture$0209.jpg">
                                </div>
                                <div class="album_explore_creative_name">Sung</div>
                            </div>
                        </a><a href="https://w3.pinpinbox.com/mars" target="_blank">
                            <div class="album_explore_creative_list_box">
                                <div class="profile_img_wrap">
                                    <img class="profile_img" src="https://ppb.sharemomo.com/storage/zh_TW/user/6/picture$9ae2.jpg">
                                </div>
                                <div class="album_explore_creative_name">Mars</div>
                            </div>
                        </a><a href="https://w3.pinpinbox.com/index/creative/content/?user_id=154" target="_blank">
                            <div class="album_explore_creative_list_box">
                                <div class="profile_img_wrap">
                                    <img class="profile_img" src="https://ppb.sharemomo.com/storage/zh_TW/user/154/picture$f4f7.jpg">
                                </div>
                                <div class="album_explore_creative_name">cailum_4</div>
                            </div>
                        </a><a href="https://w3.pinpinbox.com/index/creative/content/?user_id=335" target="_blank">
                            <div class="album_explore_creative_list_box">
                                <div class="profile_img_wrap">
                                    <img class="profile_img" src="https://ppb.sharemomo.com/storage/zh_TW/user/335/picture$e067.jpg">
                                </div>
                                <div class="album_explore_creative_name">atttttt</div>
                            </div>
                        </a>            </div>
        </div>

    </div>
    <!-- BANNER與精選創作人區塊結束 -->

    <!-- bookcase -->
    <div class="album_explore_bookcase_content">
            </div>
</div>
<!-- 主要內容區結束 -->

<script>
    var buy_album_min_point = 2;

    //HEADER頁面載入一開始先移除底線區塊開始
    if ($('.album_explore_cat_tab').length > 0) {  //有輪播時不要底線
        $('#header').css('border', 'none');
    }

    //分類加NICESCROLL
    var nicesx1 = $("#album_explore_cat_area").niceScroll({
        touchbehavior: true,
        enablemousewheel: false,
        cursorcolor: "transparent",
        cursoropacitymax: 0,
        cursorwidth: 10,
    });

    //判斷拖曳還是點擊
    var isDragging = false, startingPos = [];
    $("#album_explore_cat_area a").mousedown(function (evt) {
        isDragging = false;
        startingPos = [evt.pageX, evt.pageY];
    }).mousemove(function (evt) {
        if (!(evt.pageX === startingPos[0] && evt.pageY === startingPos[1])) {
            isDragging = true;
        }
    }).mouseup(function () {
        if (!isDragging)
            location.href = $(this).attr('href');
    });

    //書櫃項目加NICESCROLL
    var nicesx2 = $(".album_explore_bookcase_content_box_area").niceScroll({
        touchbehavior: true,
        enablemousewheel: false,
        cursorcolor: "transparent",
        cursoropacitymax: 0,
        cursorwidth: 10,
    });

    //判斷拖曳還是點擊
    var isDragging = false, startingPos = [];
    $(".album_explore_bookcase_content_box_area a").mousedown(function (evt) {
        isDragging = false;
        startingPos = [evt.pageX, evt.pageY];
    }).mousemove(function (evt) {
        if (!(evt.pageX === startingPos[0] && evt.pageY === startingPos[1])) {
            isDragging = true;
        }
    }).mouseup(function () {
        if (!isDragging) location.href = $(this).attr('href');
    });

    //輪播
    var owl1 = $("#album_explore_banner_carousel");
    owl1.owlCarousel({
        singleItem: true,
        lazyLoad: true,
        autoPlay: false,
        slideSpeed: 2000,
        pagination: true,
        stopOnHover: true,
        //autoHeight: true
    });

    $('.owl-prev').click(function () {
        owl1.trigger('owl.prev', [300]);
    });

    $('.owl-next').click(function () {
        owl1.trigger('owl.next', [300]);
    })

    if($('#album_explore_banner_carousel .page').length ==1 ){
        $('.album_explore_banner_area .owl-buttons').css('display','none');
    }

    // report
    function alert_submit(id) {
        var obj = $('input[name=report]:checked'), value = obj.val();

        if (obj.length < 1) {
            alert('請選擇一個檢舉意向。');
        } else {
            $.post("https://w3.pinpinbox.com/index/album/report/", {
                value: value,
                album_id: id,
                url: window.location.href,
            }, function (r) {
                r = $.parseJSON(r);
                $('#alert_bg_new').trigger('click');
                if (r.result == 1) {
                    alert(r.message);
                } else if (r.result == 2) {
                    _jbox(r, 'error');
                } else {
                    alert(r.message);
                }
            });
        }
    }

    function buyalbum(id) {
        $.post('https://w3.pinpinbox.com/index/album/buyalbum/?categoryarea_id=4', {
            album_id: id,
        }, function (r) {
            r = $.parseJSON(r);
            switch (r.result) {
                case 2:
                    _jBox(r, 'success_notext');
                    break;
                case 4:
                    buy_album_min_point = r.data.album.data.album.point;
                    var myConfirm = new jBox('Confirm', {
                        cancelButton: '否',
                        confirmButton: r.data.property.buyAlbumBoxBtn,
                        confirm: function () {
                            $.post('https://w3.pinpinbox.com/index/album/buyalbum/?categoryarea_id=4', {
                                album_id: id,
                                buy: true,
                                point_to_use: $('input[name="customerpoint"]').val(),
                            }, function (r2) {
                                r2 = $.parseJSON(r2);

                                switch (r2.result) {
                                    case 1:
                                        var myModal = new jBox('Modal', {
                                            delayOpen: 300,
                                            title: '<span style="display: inline-block;height: 100%;vertical-align: middle;"></span>' + '<img style="vertical-align: middle;" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/success.png">',
                                            onCloseComplete: function () {
                                                myModal.destroy();
                                                $('li[data-albumId="' + id + '"]').remove();
                                                if (r2.data) {
                                                    if (r2.data.task.message.length > 0) _TaskAlert(r2, 'task');
                                                }
                                                if (r2.data.album_count) $('span.albumstatistics').html(r2.data.album_count);
                                                $('h3[data-album_id="' + id + '"]').prepend('<img src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/assets-v5/icon-collection-h.svg">')
                                                browseKitRefresh();
                                                browseKit_album('https://w3.pinpinbox.com/index/album/show_photo/', {album_id: id, keyPress : 0});
                                            }
                                        }).setContent(
                                            '<div class="content">' + r2.message + '</div>'
                                        ).open();
                                        break;

                                    case 2:
                                        _jBox(r2, 'info');
                                        break;

                                    case 3:
                                        window.open('https://w3.pinpinbox.com/index/user/point/?albumcontent=af86bec521380d6a54b9058031b8b4cd', 'userpoint', config = 'height=800,width=1200');
                                        break;
                                    default:
                                        _jBox(r2, 'error');
                                        break;
                                }
                            });
                        },
                        onCloseComplete: function () {
                            myConfirm.destroy();
                        }
                    }).setContent(r.data.property.buyAlbumBoxContent).open();

                    break;

                case 5 :
                    if (r.data) {
                        if (r.data.task.message.length > 0) _TaskAlert(r, 'task');
                    }
                    browseKitRefresh();
                    browseKit_album('https://w3.pinpinbox.com/index/album/show_photo/', {album_id: id});
                    break;


                default:
                    _jBox(r, 'error');
                    break;
            }
        });
    }

    // 檢查輸入的 point
    function checkpoint(i, v) {
        var minPoints = buy_album_min_point,
            maxPoints = 50000,
            customerPoints = 0,
            message = '';
        $('#albumPoint2TWD').html((v/2).toFixed(1));
        if (v < minPoints) {
            message = '最低為:' + minPoints + 'P';
        } else if (v > maxPoints) {
            message = '最高為:' + maxPoints + 'P';
            $(i).val(maxPoints);
            $('#albumPoint2TWD').html((maxPoints/2).toFixed(1));
        } else if (v > customerPoints) {
            message = '您的P點不足, 是否前往<a href="javascript:void(0)" onclick="deposit();">儲值</a>?';
        }

        $('p[name="pointTips"]').html(message);
    }

    function share_album(id, qrcode, cover, shareUrl) {
        var str = '<div>' +
            '<ul class="share_album_' + id + '">' +
            '<li class="facebook" title="分享我的作品至Facebook!"></li>' +
            '<li class="twitter" title="分享我的作品至twitter"></li>' +
            '<li class="plusone" title="分享我的作品至Google+"></li>' +
            '<li class="pinterest" title="分享我的作品至pinterest" data-media="' + cover + '"></li>' +
            '<li class="line" title="分享相簿至Line"></li>' +
            '<li class="qrcode social-likes__widget" title="開啟QRcode"><a class="imagepop" href="' + qrcode + '"><img width="23" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/qr.png" style="padding-top:5px;"></a></li>' +
            '</ul>' +
            '</div><br>' +
            '<div>' +
            '<input style="width:300px;height:2em;" type="text" class="share_url" value="' + shareUrl + '">' +
            '</div>';

        box = new jBox('Modal', {
            closeButton: 'title',
            title: 'Share it',
            width: 350,
            height: 130,
            zIndex: 200,
            onOpen: function () {
                socialLikesButtons.line.clickUrl = 'http://line.naver.jp/R/msg/text/?' + encodeURIComponent(shareUrl);
                $('.share_album_' + id).socialLikes({
                    url: shareUrl,
                    title: '分享此 pinpinbox 作品！',
                    counters: true,
                    singleTitle: 'Share it!',
                });

                //counter link
                $('.share_album_' + id).on('popup_closed.social-likes', function (event, service) {
                    $(event.currentTarget).socialLikes({forceUpdate: true});
                    var counter = $(event.currentTarget).find('.social-likes__counter_' + service);
                    counter.text(+(counter.text() || 0) + 1).removeClass('social-likes__counter_empty');

                    if (service == 'facebook') {
                        $.post('https://w3.pinpinbox.com/index/album/clear_task/', {
                            album_id: id,
                        }, function (r) {
                            r = $.parseJSON(r);
                            switch (r.result) {
                                case 1:
                                    if (r.data) {
                                        if (r.data.task.message.length > 0) _TaskAlert(r, 'task');
                                    }
                                    break;

                                default :

                                    break;
                            }
                        });
                    }
                });

                $('.imagepop').magnificPopup({type: 'image',});
            },
        }).setContent(str).open();
    }

    //line icon
    var socialLikesButtons = {
        line: {
            clickUrl: '',
            pupupWidth: 650,
            popupHeight: 500,
        }
    };

</script>
<!-- Line  -->
<script type="text/javascript" src="//media.line.me/js/line-button.js?v=20140411"></script>
<!-- FOOTER區塊開始 -->
<div id="footer">
    <div id="footer_area">
        <ul>
            <li class="mobile_show"><a href="https://w3.pinpinbox.com/index/about/">關於我們</a></li>
            <li class="mobile_show"><a href="https://w3.pinpinbox.com/index/tutorial/?tutorial_viewed=1" class="cicle_btn">經營小幫手</a></li>
            <li class="mobile_show"><a href="https://w3.pinpinbox.com/index/index/qanda/">Q&amp;A</a></li>
            <li class="mobile_show"><a href="https://w3.pinpinbox.com/index/recruit/">企業合作</a></li>
            <li class="mobile_show"><a href="https://w3.pinpinbox.com/index/index/privacy/">條款與政策</a></li>
            <li class="app_load mobile_show">
                <div class="dropdown-sign dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                    <span>下載APP <i class="fa fa-caret-down"></i>
                </div>

                <div class="dropdown-menu dropdown_menu" role="menu">
                    <ul>
                        <li><a id="apple_btn" data-url="pinpinbox://index/" target="_blank" onclick="clickHandler(this.dataset.uri)" href="https://itunes.apple.com/tw/app/id1057840696">iOS</a></li>
                        <li><a data-url="pinpinbox://index/" target="_blank" onclick="clickHandler(this.dataset.uri)" href="https://play.google.com/store/apps/details?id=com.pinpinbox.android">Android</a></li>
                    </ul>
                </div>
            </li>
            <li class="footer_lang">
                <div class="dropdown-sign dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
			    <span>語言 <i class="fa fa-caret-down"></i>
                </div>
                <div class="dropdown-menu dropdown_menu" role="menu">
                    <ul>
                        <li><a href="https://w3.pinpinbox.com/index/album/explore/?categoryarea_id=4&lang=zh_TW">繁體中文</a></li>                    </ul>
                </div>
            </li>

            <li class="mobile_show mobile_footer_lang">
                <span class="custom-select">
				    <select id="lang_type" onchange="to_href();">
                        <option value="https://w3.pinpinbox.com/index/album/explore/?categoryarea_id=4&lang=zh_TW">繁體中文</option>			        </select>
                </span>
            </li>
            <li class="footer_copyright">© 2018 pinpinbox All Rights <R></R>eserved.</li>
        </ul>
    </div>
</div>
<!-- FOOTER區塊結束 -->

<!-- 回上方箭頭與FB區塊開始  -->
<div id="right_btn">
    <div id="scroll_top"><a href="javascript:void(0)"><img src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/icon_top.svg" ></a></div>
    <div id="p_link"><a href="https://w3.pinpinbox.com/index/user/point/" target="_blank" title="P點購買"><img src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/assets-v7/icon_p.svg"></a></div>
</div>
<!-- 回上方箭頭與FB區塊結束 -->

<script>
    $(document).ready(function() {
        custom_select();
    });

    function custom_select(){
        var x, i, j, selElmnt, a, b, c;
        x = document.getElementsByClassName("custom-select");  //包住SELECT元件的SPAN區塊
        for (i = 0; i < x.length; i++) {
            selElmnt = x[i].getElementsByTagName("select")[0];

            /*for each element, create a new DIV that will act as the selected item:*/
            a = document.createElement("DIV");
            a.setAttribute("class", "select-selected"); //顯示被選的項目文字, 蓋在SELECT元件上
            a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;

            //查看是否已有仿製下拉選單
            if(!$('#'+selElmnt.id).siblings('.select-selected').length){
                x[i].appendChild(a);
            }
            if(!$('#'+selElmnt.id).siblings('.select-items').length){

                b = document.createElement("DIV");
                b.setAttribute("class", "select-items select-hide"); //仿下拉選單
                for (j = 0; j < selElmnt.length; j++) {
                    c = document.createElement("DIV"); //仿每一筆下拉選單值OPTION
                    c.innerHTML = selElmnt.options[j].innerHTML; //仿選單的顯示值等於被選的SELECT顯示值
                    if(selElmnt.id == 'hobby_0' || selElmnt.id == 'hobby_1' || selElmnt.id =='hobby_2'){
                        if(j>0){
                            c.setAttribute("id", selElmnt.id+"_"+selElmnt.options[j].value); //第一筆請選擇不理會它
                        }
                    }
                    //特殊處理部份: 專區編輯頁面結束
                    var tempClassName = selElmnt.options[j].value; //給仿下拉選單CLASS NAME同SELECT下拉選單值
                    c.addEventListener("click", function(e) {
                        var y, i, k, s, h;
                        s = this.parentNode.parentNode.getElementsByTagName("select")[0]; //select物件
                        h = this.parentNode.previousSibling; //顯示被選項目值
                        for (i = 0; i < s.length; i++) {
                            if (s.options[i].innerHTML == this.innerHTML) {
                                s.selectedIndex = i;  //透過被選項目值更改SELECT被選值
                                $('#'+s.id).change(); //若原SELECT物件有設ONCHANGE時, 執行FUNCTION
                                h.innerHTML = this.innerHTML;
                                y = this.parentNode.getElementsByClassName("same-as-selected"); //仿製下拉選單先前被選的項目
                                for (k = 0; k < y.length; k++) {
                                    y[k].removeAttribute("class"); //之前被選的OPTION
                                }
                                this.setAttribute("class", "same-as-selected");  //新被選的OPTION
                                break;
                            }
                        }
                        h.click();
                    });
                    b.appendChild(c);
                }
                x[i].appendChild(b);
            }
            a.addEventListener("click", function(e) {
                e.stopPropagation();
                closeAllSelect(this);
                this.nextSibling.classList.toggle("select-hide");
                this.classList.toggle("select-arrow-active");
            });
        }// for

        //特殊處理部份: 專區編輯頁面開始
        if($('#user_address_id_1st').length>0){
            addr2_list();	//當頁面載入時先關閉城市選單
        }
        //特殊處理部份: 專區編輯頁面結束
    }

    function closeAllSelect(elmnt) {
        var x, y, i, arrNo = [];
        x = document.getElementsByClassName("select-items");
        y = document.getElementsByClassName("select-selected");
        for (i = 0; i < y.length; i++) {
            if (elmnt == y[i]) {
                arrNo.push(i)
            } else {
                y[i].classList.remove("select-arrow-active");
            }
        }
        for (i = 0; i < x.length; i++) {
            if (arrNo.indexOf(i)) {
                x[i].classList.add("select-hide");
            }
        }
    }

    document.addEventListener("click", closeAllSelect);

deeplink.setup({
    iOS: {
        appId: "1057840696",
        appName: "pinpinbox",
    },
    android: {
        appId: "com.pinpinbox.android",
    }
});

$(function(){
    //判斷HOVER動作
    addhover();

	//search: on + datalist
	$('input[name="searchkey"]').on({
		keypress: function(e) {
			if (e.which == 13 || e.keyCode == 13) { _search(); }
		},
	}).typeahead({
		afterSelect: function(){ _search(); },
		autoSelect: false,
		showHintOnFocus: true,
		source: function(query, process) {
			$.post('https://w3.pinpinbox.com/index/search/', {
				searchkey: query
			}, function(r) {
				process($.parseJSON(r));
			});
		},
	});

    $('#notifier').on('click', function() {
        $.post('https://w3.pinpinbox.com/index/index/getNotifications/', {
            data : 0,
        }, function(r) {
            r = $.parseJSON(r);
            switch (r.result) {
                case 1:
                    $('.notifier_icon').hide();

                    $('.noticeWarpper').empty();
                    for (let [i, v] of r.data.entries()) {
                        $('.noticeWarpper').append(`<li>
                            <a href="${v.target_url}">
                                <div class="notifier_img_c"><img src="${v.trigger_user_pic}" onerror="this.src=\'https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/face_sample.png\'"></div>
                                <div class="notifier_info">
                                    <span>${v.message}</span>
                                    <span><time datetime="${v.time}" class="timeago"></time></span>
                                </div>
                            </a>
                        </li>`);
                    }

                    $('time.timeago').timeago();
                    break;

                default:
                    break;
            }
        });
    });

    // v2
    $('a.searchtype').on('click', function(){
        var device = $(this).data('device');
        $('span.search_type').html($(this).html());
        $('input#'+device+'_searchkey').data('searchtype' , $(this).data('searchtype'));
    });

    //MOBILE版搜尋切換
    $('.mobile_menu #search_m').click(function() {
        $('#mobile_search').addClass("search_box_open");
        $('#header_top').addClass("header_top_close");
    });

    //MOBILE版搜尋關閉
    $('.header_search_close').click(function(evt) {
        $('#mobile_search').removeClass("search_box_open");
        $('#header_top').removeClass("header_top_close");
    });

    $('#notifier_m').click(function(e) {
        e.stopPropagation();
        $('#notifier').dropdown('toggle');
    });

    $('#login_m').click(function(e) {
        e.stopPropagation();
        $('#login').dropdown('toggle');
    });

    //當WIDNWOS RESIZE時, 關閉選單
    $( window ).resize(function(evt) {
        addhover();
    });
});

//hover動作判斷
function addhover(){
    if($( window ).width()> 801){
        $(".hit_story").addClass('hit_story_hover');
    }else{
        $(".hit_story").removeClass('hit_story_hover');
    }
}

function _search(device = null) {
    if(device == null) { device = (isMobile()) ? 'mobile' : 'desktop' ; }
	var searchtype = $('input#'+device+'_searchkey').data('searchtype');

	switch (searchtype) {
		case 'album' :
			var url = 'https://w3.pinpinbox.com/index/album/?rank_id=0';
		break;

		case 'user' :
			var url = 'https://w3.pinpinbox.com/index/creative/?rank_id=0';
		break;
	}
	
		var searchkey = $('input#'+device+'_searchkey').val().trim();

	//cookie
	var search = [], searched = $.cookie('search')? $.parseJSON($.cookie('search')) : [], array = [];
	if (searchkey !== '') searched.unshift(searchkey);
	for (var i = 0; i < searched.length; ++i) {
	    if (array.indexOf(searched[i]) < 0) {
	  	    array.push(searched[i]);
	    	search.push(searched[i]);
	    }
	}
	if (search.length > 16) search.pop();
	$.cookie('search', JSON.stringify(search), {path: '/'});
	
	if(encodeURIComponent(searchkey).length == 0) {
        $('input#'+device+'_searchkey').attr('placeholder', '請輸入搜尋內容');
    } else {
        location.href = url + '&searchtype=' + searchtype + '&searchkey=' + encodeURIComponent(searchkey);
    }
}

function clickHandler(uri) {
    deeplink.open(uri);

    return false;
}

function ios_notice() {
	var siteModal = new jBox('Modal', {
		delayOpen: 200,
		title: '<span style="display: inline-block;height: 100%;vertical-align: middle;"></span><img style="vertical-align: middle;" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/info.png">',
		maxWidth: 600,
		minWidth: 100,
	}).setContent('Coming Soon!').open();
}

function to_href(){
   var lang_type = document.getElementById("lang_type");
    var lang_type_url = lang_type.options[lang_type.selectedIndex].value;
    location.href = lang_type_url;
}

</script></div>
<script>
$(function(){  $('[data-toggle="tooltip"]').tooltip(); });function popview(url) {
    $('.jBox-wrapper').remove();
    $.post(url, {
        data : null,
    }, function(r) {
        content = $(r).find('#album_content_area');
        script = $(r).find('script[name="popview"]');

        if(!$('#JboxPopview').length) {
            var popview = new jBox('Modal', {
                addClass : 'popview_content',
                id : 'JboxPopview',
                zIndex : 1000,
                target: $('body'),
                isolateScroll: false,
                onCloseComplete: function() {
                    popview.destroy();
                    browseKitRefresh();
                },
                onOpen : function(){
                    $('.jBox-content .descrip').html( $('.jBox-content .descrip').html() ) ;
                    $('.jBox-content').append(script);
                    // 由於作品頁會被其他頁面引入, 需透過 refresh 重新處理分享連結
                    addthis.layers.refresh();
                    window.onpopstate = function(event) { popview.close();};
                },
            }).setContent(content).open();
        }
    });
}

/*
 * webpush
 */

/*
 * facebook
 */
window.fbAsyncInit = function() {
	FB.init({
		appId: '525308027624460',
		cookie: true,
		version: 'v2.10'
	});

	Window.FB = FB;
};

logInWithFacebook = function() {
	FB.login(function(response) {
		if (response.authResponse) {
			$('#login_facebook').hide().next('div').show();
			$.post('https://w3.pinpinbox.com/index/user/login_facebook/?categoryarea_id=4', {accessToken: response.authResponse.accessToken}, function(r) {
				r = $.parseJSON(r); 
				if (r.result == 1) {
					_jBox(r, 'success_notext');
				} else {
					_jBox(r, 'error');
				}
				$('#login_facebook').show().next('div').hide();
			});
		} else {
			_jBox({message: '登入失敗'}, 'error');
		}
	}, {scope: 'public_profile,email,user_friends,user_birthday', auth_type: 'rerequest'});
	
	return false;
};

var askAutoPlay = true,
    adjustAppQrcodeUrl,
	a_album_element = [],	//browseKit element of album
	a_album_item = [];		//browseKit item of album

function browseKit_album(url, param) {
	param.pageCalledByXHR = $('#pageCalledByXHR').length;
	if (a_album_item.length == 0) {
		$.post(url, param, function(r) {
			r = $.parseJSON(r);
			if (r.result == 1) {
				for (var k0 in r.data.readable) {
					subHtml = '';

					if (r.data.readable[k0]['name']) subHtml += '<h4>' + r.data.readable[k0]['name'] + '</h4>';

					if (r.data.readable[k0]['description']) subHtml += '<p>' + r.data.readable[k0]['description'] + '</p>';
					
					if (r.data.readable[k0]['hyperlink']) {
						hyperlink = [];
						r.data.readable[k0]['hyperlink'].forEach(function(v0){
							hyperlink.push('<a target="_blank" href="' + v0.url + '">' + v0.text + '</a>');
						});
						subHtml += hyperlink.join('&emsp;');
					}

					o_audio = {loop: r.data.readable[k0].audio_loop, mode: r.data.readable[k0].audio_mode, src: r.data.readable[k0].audio_target};
                    //組抽獎影片圖示
                    slotHtml = '';
                    videoHtml = '';
                    switch (r.data.readable[k0]['usefor']) {
                        case 'slot':
                        case 'exchange':
                            slotHtml = '<img src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/assets-v6/gift-01.svg" style="display:block;position:absolute;right:2px;bottom:2px;z-index:3000;background:#FF5E68;width:20px;height:20px;border-radius:20px;">';
                            break;
                        case 'video':
                            videoHtml = '<img alt="影片" title="影片" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/assets-v6/play-01.svg"  style="display:block;position:absolute;left:2px;bottom:2px;z-index:3000;background:rgba(0,0,0,0.65);width:20px;height:20px;border-radius:20px;">';
                            break;
                    }

                    //組聲音圖示
                    audioHtml = '<img alt="聲音" title="聲音" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/assets-v6/speaker-01.svg" style="display:block;position:absolute;left:2px;bottom:2px;z-index:3000;background:rgba(0,0,0,0.65);width:20px;height:20px;border-radius:20px;">';

					switch (r.data.readable[k0]['usefor']) {
						case 'video':
							href = r.data.readable[k0]['video_target'];
							poster = r.data.readable[k0]['image'];
							thumb = r.data.readable[k0]['image_thumbnail'];
							platform = fetch_video_platform(href);
							switch (r.data.readable[k0]['video_refer']) {									
								case 'embed':
									a_album_item.push({
										audio: o_audio,
								    	href: href,
								        poster: poster,
								        src: href,
								        subHtml: subHtml,
                                        slotHtml: slotHtml,
                                        videoHtml: videoHtml,
								        thumb: thumb,
								        usefor: 'video',
								        platform: platform,
								        recommendedBuyAlbum : r.data.readable[k0]['recommendedBuyAlbum'],
								    });
									break;

								case 'file':
									if ($('#video-' + k0).length == 0) {
										$('body').append(
												'<div class="lgVideoWrapper" style="display:none;" id="video-' + k0 + '">' +
												'<video controlsList="nodownload" class="lg-video-object lg-html5" controls preload="none">' +
											    '<source src="' + href + '" type="video/mp4">Your browser does not support HTML5 video.</video>' +
											    '</div>'
										);
									} else {
                                        $('#video-' + k0).find('source').attr('src', href);
                                    }
									
									a_album_item.push({
										audio: o_audio,
								    	html: '#video-' + k0,
								        poster: poster,
								        subHtml: subHtml,
                                        slotHtml: slotHtml,
                                        videoHtml: videoHtml,
								        thumb: thumb,
								        usefor: 'video',
								        recommendedBuyAlbum : r.data.readable[k0]['recommendedBuyAlbum'],
								    });
									break;
							}
							break;

						default:
							href = r.data.readable[k0]['image'];
							thumb = r.data.readable[k0]['image_thumbnail'];
							a_album_item.push({
						        audio: o_audio,
						    	href: href,
						        src: href,
						        subHtml: subHtml,
                                slotHtml: slotHtml,
                                videoHtml: videoHtml,
						        thumb: thumb,
						        usefor: 'audio',
						        recommendedBuyAlbum : r.data.readable[k0]['recommendedBuyAlbum'],
						    });
							break;
					}
				}

				param.adjustAppQrcodeUrl = adjustAppQrcodeUrl = r.data.property.album.adjustAppQrcodeUrl;

				browseKit_v2(this, a_album_item, param);
			} else {
				_jBox(r, 'error');
			}
		});
	} else {
        param.adjustAppQrcodeUrl = adjustAppQrcodeUrl
		browseKit_v2(this, a_album_item, param);
	}
}

function browseKit_v2(that, item, param) {
	a_album_element.push(that);
	var indexId = 0;

    if($('#mask02').data('indexId')) {
        indexId = $('#mask02').data('indexId');
    } else if(param.preview_page_length) {
        indexId = (param.preview_page_length >= item.length ) ? 0 : param.preview_page_length ;
    }

    var	$lg = $(that).lightGallery({
		loadYoutubeThumbnail: true,
		youtubeThumbSize : 'hqdefault',
        dynamic: true,
        dynamicEl: item,
        hash: false,
		hideBarsDelay: 3000,
		loop: false,
		download: false,
		index : indexId,
		thumbWidth: 80,
        keyPress : !param.keyPress,
		youtubePlayerParams: {
	        showinfo: 0,
	        rel: 0,
		},
    }).on('onAfterOpen.lg', function(e) {
    	if(item[0].audio.src != null) {
    		audioPlayer = $('#lg-audio'); 
    		audioPlayer.attr('controlsList', 'nodownload');
    		setTimeout(function(){ 
    			audioPlayer[0].play(); 
    		}, 700); 
    	}
            //加入抽獎影片圖示
            $(".lg-thumb-item").css('position','relative');
            for(i=0;i<item.length;i++) {
                if(item[i].audio.src!=null && item[i].audio.src!=''){
                    //加入聲音圖示
                    $(".lg-thumb-item:nth-child("+(i+1)+")").append(audioHtml);
                }
                $(".lg-thumb-item:nth-child("+(i+1)+")").append(item[i].slotHtml);
                $(".lg-thumb-item:nth-child("+(i+1)+")").append(item[i].videoHtml);
            }
	}).on('onAfterSlide.lg',function(e, p, i){
	    $lg.data('lightGallery').modules.audio.build();
        audioPlayer = $('#lg-audio'); _audipPlayer = document.getElementById("lg-audio");
        audioPlayer.attr('controlsList', 'nodownload');
        switch(item[i].usefor) {
        	case 'video' : audioPlayer[0].pause(); break;
        	case 'audio' : if( _audipPlayer.hasAttribute("autoplay")) audioPlayer[0].play(); break;
        }
        if(item[i].audio.mode == 'singular') askAutoPlay = false;
       
		if(item[i].audio.src != null && askAutoPlay) { $('span#lg-audio-button').trigger('click') ; }

		audioPlayer[0].addEventListener("play", function () {
			audioPlayer.bind('contextmenu',function() { return false; }); 
			if(!_audipPlayer.hasAttribute("autoplay")) $('.lg-audio-mask:first').hide();
			askAutoPlay = false;
			audioPlayer.attr('autoplay', 'autoplay');
		}, false);

		audioPlayer[0].addEventListener("pause", function (e) {	
			if(e.target.ended == false ) {
				askAutoPlay = false;
				audioPlayer.removeAttr('autoplay');
			}
		}, false);

        if (item[i].slotHtml != null && item[i].slotHtml != '') {
            var slotConfirm = new jBox('Modal', {closeButton: 'title'});
            var slotContent = '', slotTitle = '';
            slotTitle += '<p class="keypoint" style="margin-right:-20px;font-size:2em;text-align:center;line-height:1.2em;">下載ＡＰＰ即可兌換／抽獎</p>'
            slotContent += '<div class="content" style="text-align:center;" >';
            if(isMobile()){
                slotContent += `<p style="margin:0 auto;width:80%;background:#FF5E68;color:#fff;border-radius:30px;padding:8px 5px;cursor: pointer;" data-uri="pinpinbox://index/album/content/?album_id=${param.album_id}"  onclick="clickHandler(this.dataset.uri);" ><img src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/assets-v6/gift-01.svg" style="vertical-align:middle;display:inline-block;background:#FF5E68;width:30px;height:30px;border-radius:30px;margin-right:3px;">`;
                slotContent += `<span style="display:inline-block;font-size:20px;vertical-align:middle;" >立即開啟</span></p>`;
            }else{
                slotContent += `<span data-uri="pinpinbox://index/album/content/?album_id=${param.album_id}"  onclick="clickHandler(this.dataset.uri);"><img src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/assets-v6/gift-01.svg" style="position:absolute;z-index:5;top:38.8%;left:44.8%;vertical-align:middle;display:block;background:#FF5E68;width:40px;height:40px;border-radius:40px;">`;
                slotContent += `<img src="${param.adjustAppQrcodeUrl}" style="padding:3px;width:180px;height:auto;" ></span>`;
            }
            slotConfirm.setTitle(slotTitle).setContent(slotContent).open();
        }
        $('.jBox-overlay:last-child').css('background-color','rgba(255,255,255,0.3)');
		if($('#JboxRecommendedBuyAlbum').length) RecommendedBuyAlbum.destroy();

		if(item[i].recommendedBuyAlbum ) recommendedBuyAlbum();
					
			setTimeout(function() {
                if( window.DMplayerE ) { window.DMplayerE.pause(); }

                if((item[i].platform) == 'facebook') {
					$('div.lg-current .lg-video-cont').empty();
					var element = `<div
									id="fbVideo"
									class="fb-video"
									data-href="${item[i].src}"
									data-width="500"
									data-allowfullscreen="true"></div>`;
					$('div.lg-current .lg-video-cont').append(element);
					window.FB.XFBML.parse();
                } else if ((item[i].platform) == 'dailymotion') {
                    var videoStr2Array = (item[i].src).split('/'), element = `<div id="DMplayer"></div>`;
                    $('div.lg-current .lg-video-cont').empty().append(element);
                    DMplay(videoStr2Array[(((item[i].src).split('/')).length - 1)], 640, 400);
                }

			}, 200);
    }).on('onAfterAppendSubHtml.lg',function(e){
        $lg.data('lightGallery').modules.subhtml.build();
    }).on('onCloseAfter.lg', function(e){
            });

    window.$lg = $lg;
}

function browseKitRefresh() {
	a_album_item = [];
	
	$.each(a_album_element, function(k0, v0) {
		$(v0).removeData('lightGallery');
	});
}

function DMplay(id, w = 320, h = 200) {
    if($('iframe#DMplayer').length > 0) $('iframe#DMplayer').remove();
    DM.api('/videos', {
        filters: 'buzz',
        fields: 'id',
    }, function () {
        var player = DM.player(document.getElementById('DMplayer'), {
            video: id,
            width: w,
            height: h,
        });

        window.DMplayerE = player;
    });
}

function fetch_video_platform(url) {	
	var returnType,
		isHTML = RegExp.prototype.test.bind(/(<([^>]+)>)/i);
	
	if( typeof(url) != 'undefined' && !isHTML(url) ) {
		if( (url.match('youtu.be') != null || url.match('youtube.com') != null) && !url.includes('embed') ) {
			returnType = 'youtube';
		}else if(url.match('vimeo') != null){
			returnType = 'vimeo';
		}else if(url.match('facebook') != null ) {
			returnType = 'facebook';
		}else if(url.match('dailymotion') != null ) {
			returnType = 'dailymotion';
		}else if(url.match('pinpinbox') != null){
			returnType = 'pinpinbox';
		}
	}

	return returnType;
}

function _jBox(r, c) {
	var img = {
		'error': 'https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/error.png',
		'info': 'https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/info.png',
		'success': 'https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/success.png',
	};
	
	switch (c) {
		case 'success':
		case 'error':
		case 'info':
			var box = new jBox('Modal', {
				closeButton: 'title',
				delayOpen: 300,
				maxWidth: 600,
				minWidth: 100,
				autoClose : r.timer || 0,
				title: '<span style="display: inline-block;height: 100%;vertical-align: middle;"></span><img style="vertical-align: middle;" src="' + img[c] + '">',
				onCloseComplete: function() {
					if(typeof( window.onbeforeunload) != 'undefined' ) window.onbeforeunload = null;
					if (r.data && typeof(r.data.task) != 'undefined') { 
						(typeof(r.data.task.message) != 'undefined' && r.data.task.message.length > 0) ? _TaskAlert(r, 'task') : (r.redirect) ? location.href = r.redirect : null; 
					} else {
						if (r.redirect) location.href = r.redirect;
					}			
				},
			}).setContent('<div class="content">' + r.message + '</div>').open();
			break;

		case 'success_notext':
			if (typeof( window.onbeforeunload) != 'undefined' ) window.onbeforeunload = null;

			if (r.data && typeof(r.data.task) != 'undefined') {
				(typeof(r.data.task.message) != 'undefined' && r.data.task.message.length > 0) ? _TaskAlert(r, 'task') : (r.redirect) ? (r.redirect=='createAlbum') ? createAlbum() : location.href = r.redirect : null; 
			} else {
				if (r.redirect) {
					(r.redirect == 'createAlbum') ? createAlbum() : location.href = r.redirect;
				}
			}
			break;

		case 'map':
			var box = new jBox('Modal', {
				closeButton: 'title',
				delayOpen: 300,
				maxWidth: 600,
				minWidth: 100,
				title: '<i style="color:#ee5b8d;font-size:22px;" class="fa fa-map-marker" ></i>'+ r.data,
			}).setContent('<div class="content">' + r.message + '</div>').open();
			break;
	
		case 'albumProcess':
			block_box = new jBox('Modal', {
				offset: {y: -50},
				position: {y: 'center'},
				closeButton: 'title',
				closeOnClick: false,
				closeOnEsc: false,
				delayOpen: 300,
				zIndex: 1500,
			}).setContent('<div class="content">正在儲存上次未完成的進度...<img src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/loading.gif"></div>').open();
			
			$.post('https://w3.pinpinbox.com/index/album/save_album_ajax/' , {
				album_id : r.data,
				template_id: '',
				current_album_id: '',
			}, function(r2) {
				block_box.close();
				r2 = $.parseJSON(r2);
				switch (r2.result) {
					case 0 : 
						_jBox(r2, 'error');
					break;
					case 1 : 
						location.href = r2.redirect;
					break;
					case 2 : 
						_jBox(r2, 'success');
					break;
				}
			});
			break;

		case 'block':
			box = new jBox('Modal', {
				offset: {y: -50},
				position: {y: 'center'},
				closeButton: 'title',
				closeOnClick: false,
				closeOnEsc: false,
				delayOpen: 300,
				zIndex: 1500,
			}).setContent('<div class="content">處理中...<img src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/loading.gif"></div>').open();
			break;
		
		case 'blockCustomMsg':
			box = new jBox('Modal', {
				offset: {y: -50},
				position: {y: 'center'},
				closeButton: 'title',
				closeOnClick: false,
				closeOnEsc: false,
				delayOpen: 800,
				zIndex: 1500,
			}).setContent('<div class="content">'+r.message+' <p style="text-align: center;"><img src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/loading.gif"></p><p style="text-align: center;">(請勿關閉視窗)</p></div>');
			break;
			
		case 'login':
			var message = r.message || '請先登入。',
			box = new jBox('Modal', {
				closeButton: 'title',
				delayOpen: 300,
				maxWidth: 600,
				minWidth: 100,
				onCloseComplete: function() {
					if (r.redirect) location.href = r.redirect;
				},
				title: '<span style="display: inline-block;height: 100%;vertical-align: middle;"></span><img style="vertical-align: middle;" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/info.png">',
			}).setContent('<div class="content">' + message + '</div>').open();
			break;

		case 'processing':

			var box = new jBox('Modal', {
				closeOnClick: false,
				closeButton: 'title',
				width: 155,
				height: 53,
			}).setContent('<span style="padding-left:20px;font-weight:bold;color:#2299DD">處理中...</span><img src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/loading.gif">').open();
			break;

		case 'recommendedDownloadApp':
						break;
			
		case 'recommendedUpgradeGrade':
			var reDirectConfirm = new jBox('Confirm', {
				cancelButton: '否',
				confirmButton: '是',
				closeButton: 'title',
				closeOnClick: false,
				closeOnEsc: false,
				delayOpen: 300,
				cancel: function() { location.href = r.redirect; },
				confirm: function() {  location.href = 'https://w3.pinpinbox.com/index/user/grade/'; },
				onCloseComplete: function() { reDirectConfirm.destroy(); }
			}).setContent(r.message).open();
			break;
			
		case 'taketemplate':
			var box = new jBox('Confirm', {
				cancelButton: '否',
				confirmButton: '是',
				confirm: function() {
					$.post('https://w3.pinpinbox.com/index/template/_taketemplate/', {
						template_id: r.data.template_id,
						confirm: true,
						join_event : r.data.join_event,
					}, function(r) {
						r = $.parseJSON(r);
						switch (r.result) {
							case 1:
								_jBox(r, 'success');
								break;
							case 2:
								_jBox(r, 'login');
								break;
							case 3:
								_jBox(r, 'taketemplate');
								break;
							case 4:
								_jBox(r, 'albumProcess');
								break;
							case 5:
								location.href = r.redirect;
								break;
							default:
								site_jBox(r, 'error');
								break;
						}
					});
				},
				onCloseComplete: function() {	
					box.destroy();
				}
			}).setContent(
				'<div class="content">' +
				'<p>您確定要收藏此版型嗎?</p><p>收藏條件：&nbsp;<span class="red">' + r.data.point + 'P</span></p>' +
				'</div>'
			).open();
			break;

		default:
			alert('Unknown case of _jBox');
			break;
	}

	return box;
}

function site_jBox(r, type) {
	if (typeof(r.data) == 'undefined') {r.data = 'Modal'};
	var a_img = {
		'success': 'https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/success.png',
		'error': 'https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/error.png',
	},
	img = a_img[type] || 'https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/info.png';
	
	var siteModal = new jBox(r.data, {
		closeButton: 'title',
		delayOpen: 200,
		title: '<span style="display: inline-block;height: 100%;vertical-align: middle;"></span><img style="vertical-align: middle;" src="' + img + '">',
		onCloseComplete: function() {
			if (r.redirect) location.href = r.redirect;
		},
		maxWidth: 600,
		minWidth: 100,
	}).setContent('<div class="content">' + r.message + '</div>').open();
}

function _TaskAlert(r, c) {
	switch (c) {
		case 'task' :
			var url = (r.data.task.event_url) ? `<p style="text-align:right"><a href="${r.data.task.event_url}" target="_blank">活動連結</a></p>` : '' ;
				str = `<div class="content">
							<p style="text-align: center;">
								<img width="80" height="80" style="vertical-align: middle;" src="https://ppb.sharemomo.com/static_file/pinpinbox/zh_TW/images/gift_2.png">
							</p>
							<p style="margin:10px;text-align:center" class="keypoint">${r.data.task.message}</p>
							${url}
						</div>`,
				box = new jBox('Modal', {
				closeButton: 'title',
				delayOpen: 300,
				maxWidth: 600,
				minWidth: 300,
				title: '<span style="color: #23afaf; font-size:1.4em;font-weight:bold ; display: inline-block;height: 100%;vertical-align: middle;"><h2>'+r.data.task.title+'</h2></span>',
				onCloseComplete: function() {
					if (r.redirect) location.href = r.redirect;
				},
			}).setContent(str).open();
		break;
	}
}

function createAlbum() {
    $.post('https://w3.pinpinbox.com/index/template/_taketemplate_v2/', {
        template_id: 0,
    }, function(r) {
        r = $.parseJSON(r);
        switch (r.result) {
            case 1:
                _jBox(r, 'albumProcess');
                break;
            case 2:
                _jBox(r, 'success_notext');
                break;
            case 3:
                location.href = r.redirect;
                break;
            default:
                _jBox(r, 'error');
                break;
        }
    });
}

function processAjaxData(urlPath){
	window.history.pushState("","",urlPath);
}

function isMobile() {
    var isAndroid, isIOS, isMobile = false;
    if(navigator.userAgent.match(/Android/i)) isAndroid = true;
    if(navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPod/i) ) isIOS = true;
    if(isAndroid || isIOS) isMobile = true;

    return isMobile;
}

$(document).on('click', '.lg-video-play', function(){
	if($('video').length > 1) $('video').bind('contextmenu',function() { return false; });
})

//On photoswipe play video
$(document).on('click', 'button.play_video', function(){
	var video_modal = new jBox('Modal', {
		closeOnClick: false,
		closeButton: 'title',
		title : '',
		width: 'auto',
		height: 520,
		onCloseComplete : function () {
			if($('video').length > 0 ) $('video').remove();
			
			if( typeof(video_file) != 'undefined' ) {
				video_file.pause();
			}else{
				video_embed.pause() ;
				$('div[id^="mep_"]').remove();
			}
		},
	});		
	var content;
	
	switch ($(this).find('i').data('video_refer')) {
		case 'file':
			content = '<video id="video_demo_file" controls loop muted preload="auto" width="640" height="480" data-mejsoptions=\'{"alwaysShowControls": true}\'><source class="mp4" type="video/mp4" src="" />很抱歉！您的瀏覽器不支援 HTML5 Video </video>';
			video_modal.setContent(content).open();
			var video_file = $("#video_demo_file")[0];
			$("#video_demo_file source.mp4").attr('src', $(this).find('i').data('video_target'));
			video_file.play();
		break;
		
		case 'embed':
			content = '<video style="margin-top:30px;" width="740" height="480" id="video_demo_embed"><source type="video/youtube" src="'+$(this).find('i').data('video_target')+'" /></video>';			
			video_modal.setContent(content).open();
			var video_embed = new MediaElementPlayer('#video_demo_embed', {enablePluginDebug: false, flashName: 'flashmediaelement-cdn.swf'});
		break;
		
		default:
			return false
		break;
	}
});

if($('#banner_catbtn').length>0){  //有輪播時不要底線
    $('#header').css('border','none');
}

// 在HEADER加上SCROLL時, 出現底線區塊開始
window.onscroll = function() {header_sticky()};
var header = document.getElementById("header");
var sticky = header.offsetTop;
function header_sticky(){
    if (window.pageYOffset > sticky){
        header.classList.add("header_sticky");
    }else{
        header.classList.remove("header_sticky");
    }
}
</script>
</body>
</html>