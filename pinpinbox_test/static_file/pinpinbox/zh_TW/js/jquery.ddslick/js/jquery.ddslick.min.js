(function(c){function k(a,c,b){a=a.find(".dd-selected");c.showSelectedHTML?a.html((b.imageSrc?'<img class="dd-selected-image'+("right"==c.imagePosition?" dd-image-right":"")+'" src="'+b.imageSrc+'" />':"")+(b.text?'<label class="dd-selected-text">'+b.text+"</label>":"")+(b.description?'<small class="dd-selected-description dd-desc'+(c.truncateDescription?" dd-selected-description-truncated":"")+'" >'+b.description+"</small>":"")):a.html(b.text)}c.fn.ddslick=function(a){if(l[a])return l[a].apply(this,
Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)c.error("Method "+a+" does not exists.");else return l.init.apply(this,arguments)};var l={init:function(a){a=c.extend({data:[],width:260,height:null,background:"#eee",selectText:"",defaultSelectedIndex:null,truncateDescription:!0,imagePosition:"left",showSelectedHTML:!0,clickOffToClose:!0,onSelected:function(){}},a);0>=c("#css-ddslick").length&&c('<style id="css-ddslick" type="text/css">.dd-select{ border-radius:1px; border:solid 1px #ccc; position:relative; cursor:pointer;}.dd-desc { color:#aaa; display:block; overflow: hidden; font-weight:normal; line-height: 1.4em; }.dd-selected{ overflow:hidden; display:block;  font-weight:bold;}.dd-pointer{ width:0; height:0; position:absolute; right:10px; top:50%; margin-top:-3px;}.dd-pointer-down{ border:solid 5px transparent; border-top:solid 5px #000; }.dd-pointer-up{border:solid 5px transparent !important; border-bottom:solid 5px #000 !important; margin-top:-8px;}.dd-options{ border:solid 1px #ccc; border-top:none; list-style:none; box-shadow:0px 1px 5px #ddd; display:none; position:absolute; z-index:2000; margin:0; padding:0;background:#fff; overflow:auto;}.dd-option{ padding:5px; display:block; border-bottom:solid 1px #ddd; overflow:hidden; text-decoration:none; color:#333; box-sizing:border-box;cursor:pointer;-webkit-transition: all 0.25s ease-in-out; -moz-transition: all 0.25s ease-in-out;-o-transition: all 0.25s ease-in-out;-ms-transition: all 0.25s ease-in-out; }.dd-options > li:last-child > .dd-option{ border-bottom:none;}.dd-option:hover{ background:#f3f3f3; color:#000;}.dd-selected-description-truncated { text-overflow: ellipsis; white-space:nowrap; }.dd-option-selected { background:#fffff; }.dd-option-image, .dd-selected-image { vertical-align:middle; float:left; margin-right:5px; max-width:64px; margin-top:5px;}.dd-image-right { float:right; margin-right:15px; margin-left:5px;}.dd-container{ position:relative;}\u200b .dd-selected-text { font-weight:bold}\u200b</style>').appendTo("head");
return this.each(function(){function f(){b.find(".dd-option").each(function(){var a=c(this),m=a.css("height"),d=a.find(".dd-option-description"),e=b.find(".dd-option-image");0>=d.length&&0<e.length&&a.find(".dd-option-text").css("lineHeight",m)})}var b=c(this);if(!b.data("ddslick")){b.addClass("dd-container").append('<div class="dd-select"><input class="dd-selected-value" type="hidden" value="" /><a class="dd-selected"></a><span class="dd-pointer dd-pointer-down"></span></div>').append('<ul class="dd-options"></ul>');
var d=b.find(".dd-select"),h=b.find(".dd-options");h.css({width:a.width});d.css({width:a.width,background:a.background});b.css({width:a.width});null!=a.height&&h.css({height:a.height,overflow:"auto"});c.each(a.data,function(b,c){h.append('<li><a class="dd-option">'+(c.value?' <input class="dd-option-value" type="hidden" value="'+c.value+'" />':"")+(c.imageSrc?' <img class="dd-option-image'+("right"==a.imagePosition?" dd-image-right":"")+'" src="'+c.imageSrc+'" />':"")+(c.text?' <label class="dd-option-text">'+
c.text+"</label>":"")+(c.description?' <small class="dd-option-description dd-desc">'+c.description+"</small>":"")+"</a></li>")});d=!1;0<a.selectText.length&&null==a.defaultSelectedIndex?b.find(".dd-selected").html(a.selectText):d=!0;if(d){var d=null!=a.defaultSelectedIndex&&0<=a.defaultSelectedIndex&&a.defaultSelectedIndex<a.data.length?a.defaultSelectedIndex:0,e={};e.selectedIndex=d;e.selectedItem=b.find(".dd-option").eq(d).closest("li");e.selectedData=a.data[d];k(b,a,e.selectedData)}else e={selectedIndex:-1,
selectedItem:null,selectedData:null};e.settings=a;b.data("ddslick",e);b.find(".dd-select").on("click",function(){var a=c(this),b=a.siblings(".dd-options"),d=b.is(":visible");c(".dd-click-off-close").not(b).slideUp(50);c(".dd-pointer").removeClass("dd-pointer-up");d?(b.slideUp("fast"),a.find(".dd-pointer").removeClass("dd-pointer-up")):(b.slideDown("fast"),a.find(".dd-pointer").addClass("dd-pointer-up"));f()});b.find(".dd-option").on("click",function(){var d=c(this);c(".dd-option").removeClass("dd-option-selected");
d.addClass("dd-option-selected");var e=b.find(".dd-selected"),f=d.closest("li"),h=f.index(),g={};g.selectedIndex=h;g.selectedItem=f;g.selectedData=a.data[h];g.settings=a;b.data("ddslick",g);k(b,a,g.selectedData);e.siblings(".dd-selected-value").val(g.selectedData.value);e.siblings(".dd-pointer").toggleClass("dd-pointer-up");d.closest(".dd-options").slideToggle(50);d=b.find(".dd-select").css("height");e=b.find(".dd-selected-description");f=b.find(".dd-selected-image");0>=e.length&&0<f.length&&b.find(".dd-selected-text").css("lineHeight",
d);"function"==typeof a.onSelected&&a.onSelected.call(this,g)});a.clickOffToClose&&(h.addClass("dd-click-off-close"),b.on("click",function(a){a.stopPropagation()}),c("body").on("click",function(){c(".dd-click-off-close").slideUp(50)}))}})},select:function(a){return this.each(function(){var f=c(this);if(a.index){var b=f.data("ddslick");b.selectedIndex=a.index;b.selectedItem=f.find(".dd-option").eq(a.index).closest("li");b.selectedData=b.settings.data[a.index];b.settings=b.settings;f.data("ddslick",
b);k(f,b.settings,b.selectedData)}})}}})(jQuery);